---
title: "è¤‡é›‘ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã™ã‚‹ ã€œReanimateå…¥é–€ã€œ"
emoji: "ğŸ¬"
type: "tech"
topics: ["Haskell", "svg", "animation"]
published: true
---

Reanimateã¯**ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/0xqqpzyrop42n737s9wl6fj4hckp)

Reanimateã¯Haskellã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§**ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã‚ˆã£ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹**ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ã‚‚å¤šãã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚è±Šå¯Œã§ã™ã—ã€[ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®Playground](https://reanimate.github.io/reanimate/playground/)ã¾ã§ç”¨æ„ã•ã‚Œã¦ã„ã¦ã‹ãªã‚Šå®Œæˆåº¦ã®é«˜ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ãªã£ã¦ã„ã¾ã™ã€‚ã•ã‚‰ã«**LaTeXã‚„ç‰©ç†ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆChipmonk 2Dï¼‰, POV-Ray, Blenderãªã©**å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã¨ã®é€£æºã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å„ãƒ•ãƒ¬ãƒ¼ãƒ ã¯SVGã§æ›¸ãå‡ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã€**å¹¾ä½•å­¦çš„ãªå›³å½¢ã‚„SVGãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ã£ãŸæ–‡å­—ãªã©ã‹ã‚‰æ§‹æˆã•ã‚ŒãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ã®ãŒå¾—æ„**ã§ã™ã€‚ä½œã£ãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯æœ€çµ‚çš„ã«**MP4, GIF, WebM**ã«å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆä¸­é–“ç”Ÿæˆç‰©ã§ã‚ã‚‹å„ãƒ•ãƒ¬ãƒ¼ãƒ ã®SVGã‚’å–ã‚Šå‡ºã™ã“ã¨ã‚‚å¯èƒ½ã§ã™ï¼‰ã€‚

![](https://storage.googleapis.com/zenn-user-upload/ekzd00mbxyopziiy7pzedffz4q0p =500x)

å…¬å¼ã‚µã‚¤ãƒˆã«ExampleãŒå¤šãè¼‰ã£ã¦ã„ã‚‹ã®ã§ã€ã¾ãšã¯Reanimateã‚’ä½¿ã£ã¦ã©ã®æ§˜ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½œã‚Œã‚‹ã®ã‹ç¢ºèªã—ã¦ã¿ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

https://reanimate.github.io/

ã“ã®è¨˜äº‹ã§ã¯Reanimateã‚’ä½¿ã£ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ãŸã‚ã«å¿…è¦ãªåŸºæœ¬çš„ãªæ¦‚å¿µã‚’è§£èª¬ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

:::message
Stackã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯LTSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
ç¾æ™‚ç‚¹ã§æœ€æ–°ã®`lts-16.27`ã§ã¯`reanimate`ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ`0.3.3.0`ã¨ã‹ãªã‚Šå¤ã„ã§ã™ã€‚
LTSã‚’`nightly-2020-12-14`ã«ã™ã‚Œã°ãƒãƒ¼ã‚¸ãƒ§ãƒ³`1.1.2.1`ãŒä½¿ç”¨ã§ãã‚‹ã®ã§å•é¡Œãªã„ã§ã—ã‚‡ã†ã€‚
:::

Reanimate å…¥é–€
--------------
Reanimateã‚’ä½¿ã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®`reanimate`é–¢æ•°ã‚’ä½¿ã£ã¦`main`ã‚’å®Ÿè£…ã™ã‚‹ã®ãŒã‚´ãƒ¼ãƒ«ã«ãªã‚Šã¾ã™ã€‚

```hs
reanimate :: Animation -> IO ()
```

ã“ã®é–¢æ•°ã«ã‚ˆã£ã¦å®Ÿè£…ã•ã‚Œã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½¿ã„æ–¹ã¯å¾Œã§è¦‹ã‚‹ã¨ã—ã¦ã€ã¾ãšã¯å¼•æ•°ã¨ãªã£ã¦ã„ã‚‹`Animation`å‹ã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### Animation
ã“ã‚Œã¯è¨€ã‚ãšã‚‚ãŒãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ã™å‹ã§ã™ã€‚

```hs
mkAnimation :: Duration -> (Time -> SVG) -> Animation
```

ã¨ã„ã†é–¢æ•°ã‹ã‚‰ä½œã‚‹ã“ã¨ãŒã§ãã€å…¨ä½“ã®é•·ã•ã¨å„æ™‚é–“ã«ãŠã‘ã‚‹SVGã‚’æŒ‡å®šã™ã‚‹ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

`Duration`ã‚‚`Time`ã‚‚`Double`ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã™ã€‚

```hs
type Duration = Double
type Time = Double
```

### SVG
`SVG`ã¯ãã®åã®é€šã‚ŠSVGã‚’è¡¨ã™å‹ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢æ•°ã‹ã‚‰åŸºæœ¬çš„ãªå›³å½¢ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```hs
-- | å††
mkCircle :: Double -> SVG

-- | æ¥•å††
mkEllipse :: Double -> Double -> SVG

-- | é•·æ–¹å½¢
mkRect :: Double -> Double -> SVG

-- | ç·šåˆ†
mkLine :: (Double, Double) -> (Double, Double) -> SVG

-- | æŠ˜ã‚Œç·š
mkLinePath :: [(Double, Double)] -> SVG

-- | ãƒ‘ã‚¹
mkPath :: [PathCommand] -> SVG

-- | è‰²åã‹ã‚‰èƒŒæ™¯ã‚’å¡—ã‚Šã¤ã¶ã™SVGã‚’ä½œæˆã™ã‚‹
mkBackground :: String -> SVG

-- | è¤‡æ•°ã®SVGã‚’çµ„ã¿åˆã‚ã›ã¦ä¸€ã¤ã®SVGã«ã™ã‚‹
mkGroup :: [SVG] -> SVG
```

å®Ÿã¯[Haddockä¸Š](https://hackage.haskell.org/package/reanimate-1.1.2.1/docs/Reanimate-Svg-Constructors.html)ã§ã¯ä¸Šè¨˜é–¢æ•°ã®è¿”ã‚Šå€¤ã®å‹ã¯`Tree`ã«ãªã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€`SVG`ã¯`Tree`ã®å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãªã®ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

```hs
type SVG = Tree
```

ä¸Šè¿°ã®ã‚ˆã†ãªé–¢æ•°ã§å˜ç´”ã«ç”Ÿæˆã—ãŸSVGã¯ç”»é¢ã®çœŸã‚“ä¸­ãŒä¸­å¿ƒã«ãªã‚‹ã‚ˆã†ã«é…ç½®ã•ã‚Œã¾ã™ã€‚SVGã®ä½ç½®ãªã©ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯`SVG -> SVG`å‹ã®é–¢æ•°ã«ã‚ˆã£ã¦å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```hs
-- | SVGã‚’ x, y æ–¹å‘ã«ç§»å‹•ã•ã›ã‚‹
translate :: Double -> Double -> SVG -> SVG

-- | SVGã‚’å›è»¢ã•ã›ã‚‹
rotate :: Double -> SVG -> SVG

-- | SVGã‚’æ‹¡å¤§ç¸®å°ã™ã‚‹
scale :: Double -> SVG -> SVG

-- | ç·šã®è‰²ã‚’å¤‰ãˆã‚‹
withStrokeColor :: String -> SVG -> SVG

-- | å¡—ã‚Šã¤ã¶ã—ã®è‰²ã‚’å¤‰ãˆã‚‹
withFillColor :: String -> SVG -> SVG
```

ã“ã‚Œã ã‘ã§è‰²ã‚“ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½œã‚Œãã†ã§ã™ãŒã€å®Ÿã¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ãªã‚‰å¾Œè¿°ã™ã‚‹`Object`å‹ã‚’Tweenã‚’ä½¿ã£ã¦æ“ä½œã™ã‚‹ã»ã†ãŒç°¡å˜ãªå ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚

### ç°¡å˜ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
ã¾ã ã¾ã ä¾¿åˆ©ãªæ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã™ãŒã€ã“ã“ã¾ã§ã®æ¦‚å¿µã§ä¸€åº¦ç°¡å˜ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```hs
drawBox :: Animation
drawBox = mkAnimation 2 $ \t ->
  partialSvg t $ pathify $
  mkRect (screenWidth/2) (screenHeight/2)
```

ã“ã‚Œã¯å››è§’å½¢ã‚’æãã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã‚Šã¾ã™ã€‚`screenWidth, screenHeight`ã¯ç”»é¢ã®å¤§ãã•ã‚’å–å¾—ã™ã‚‹é–¢æ•°ã€`pathify`ã¯`mkCircle`ãªã©ã§ä½œã‚‰ã‚ŒãŸSVGã‚’ãƒ‘ã‚¹ã«ã‚ˆã‚‹è¡¨ç¾ã«å¤‰æ›ã™ã‚‹é–¢æ•°ã§ã€`partialSvg`ã¯ãƒ‘ã‚¹ã‚’é€”ä¸­ã¾ã§æã„ãŸSVGã«å¤‰æ›ã™ã‚‹é–¢æ•°ã§ã™ã€‚ãã‚Œãã‚Œã®å‹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```hs
screenWidth :: Fractional a => a
screenHeight :: Fractional a => a
pathify :: SVG -> SVG
partialSvg :: Double -> SVG -> SVG
```

`drawBox`ãŒè¨˜è¿°ã—ã¦ã„ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

![](https://storage.googleapis.com/zenn-user-upload/dvnumdzsmvl50ic6gsf698tf7hvv)

ã‚¤ãƒ¡ãƒ¼ã‚¸é€šã‚Šã§ã™ã­ğŸ‘

åŒæ§˜ã«å††ã‚’æã`drawCircle`ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```hs
drawCircle :: Animation
drawCircle = mkAnimation 2 $ \t ->
  partialSvg t $ pathify $
  mkCircle (screenHeight/3)
```

![](https://storage.googleapis.com/zenn-user-upload/nooc5mxx6nekv44zvaqvs2c3l8ul)

ä½œæˆã—ãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚ˆã†ãª`Animation -> Animation`å‹ã®é–¢æ•°ã‚’ä½¿ã£ã¦å¤‰åŒ–ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```hs
-- | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åè»¢ã•ã›ã‚‹
reverseA :: Animation -> Animation

-- | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ç”Ÿã—ã¦ã‹ã‚‰åè»¢ã•ã›ã‚‹
playThenReverseA :: Animation -> Animation

-- | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå§‹ã¾ã‚‹å‰ã«å‹•ã‹ãªã„æ™‚é–“ã‚’ä½œã‚‹
pauseAtBeginning :: Duration -> Animation -> Animation

-- | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒçµ‚ã‚ã£ãŸå¾Œã«å‹•ã‹ãªã„æ™‚é–“ã‚’ä½œã‚‹
pauseAtEnd :: Duration -> Animation -> Animation

-- | å„ãƒ•ãƒ¬ãƒ¼ãƒ ã®SVGã‚’ä¸€æ§˜ã«å¤‰æ›ã™ã‚‹
mapA :: (SVG -> SVG) -> Animation -> Animation
```

ä¾‹ãˆã° `playThenReverseA` ã‚’ä½¿ãˆã° `drawBox` ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/yzt42h9ksmnzdatxid5tjcmaszgj)

ã“ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯`drawBox`ã¨`reverseA drawBox`ã‚’é †æ¬¡ã¤ãªã’ãŸã‚ˆã†ãªå½¢ã«ãªã£ã¦ã„ã¾ã™ã‚ˆã­ã€‚æ¬¡ã¯**ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæˆã—ã¦ã‚ˆã‚Šè¤‡é›‘ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹æ–¹æ³•**ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```hs
-- | 1ã¤ç›®ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ç”Ÿã—ãŸå¾Œã«2ã¤ç›®ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ç”Ÿã™ã‚‹
seqA :: Animation -> Animation -> Animation

-- | 1ã¤ç›®ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ç”Ÿã—ãŸå¾Œã«ã€ãã®çµæœã‚’æ®‹ã—ã¤ã¤2ã¤ç›®ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ç”Ÿã™ã‚‹
andThen :: Animation -> Animation -> Animation

-- | 2ã¤ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŒæ™‚ã«å†ç”Ÿã™ã‚‹
parA :: Animation -> Animation -> Animation

-- |2ã¤ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŒæ™‚ã«å†ç”Ÿã—ã¤ã¤ã€çŸ­ã„æ–¹ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ«ãƒ¼ãƒ—ã™ã‚‹
parLoopA :: Animation -> Animation -> Animation

-- |2ã¤ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŒæ™‚ã«å†ç”Ÿã—ã¤ã¤ã€çŸ­ã„æ–¹ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒçµ‚ã‚ã£ãŸã‚‰ãã“ã§çµ‚äº†ã™ã‚‹
parDropA :: Animation -> Animation -> Animation
```

`seqA` ã¨ `andThen` ã®é•ã„ãŒåˆ†ã‹ã‚Šã«ãã„ã‹ã¨æ€ã†ã®ã§å®Ÿéš›ã«è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã¾ãšã¯ ``drawBox `seqA` drawCircle`` ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/2jmjjxitzzvqwkclywa2sa8mh52m)

æ¬¡ã« ``drawBox `andThen` drawCircle`` ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/897ifyx3oy0ekop4h4z7dy0oyted)

æœ€åˆã«æã‹ã‚ŒãŸå››è§’å½¢ãŒæ®‹ã‚Šç¶šã‘ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

ã¨ã“ã‚ã§ã“ã®ã‚ˆã†ã«é †ç•ªã«å†ç”Ÿã•ã‚Œã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ã®ã§ã‚ã‚Œã°ã€**ãƒ¢ãƒŠãƒ‰ã‚’ä½¿ã£ãŸæ‰‹ç¶šãå‹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒã‚ã‚Œã°ã‚ˆã‚Šç›´æ„Ÿçš„ã«æ›¸ãã“ã¨ãŒã§ããã†**ã§ã™ã€‚Reanimateã§ã¯ãã®ãŸã‚ã«`Scene s a`ã¨ã„ã†ãƒ¢ãƒŠãƒ‰ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ãªã£ã¦ã„ã‚‹å‹ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

### Scene s a

`Scene s a` ã¯æ‰‹ç¶šãçš„ã«æ‰±ãˆã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚·ãƒ¼ãƒ³ï¼‰ã‚’è¡¨ã™å‹ã§ã™ã€‚ä»¥ä¸‹ã®`play`é–¢æ•°ã‚’ä½¿ã£ã¦`Animation`å‹ã‹ã‚‰ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```hs
play :: Animation -> Scene s ()
```

åå¯¾ã«`Scene s a`ã‹ã‚‰`Animation`å‹ã‚’ä½œã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```hs
scene :: (forall s. Scene s a) -> Animation
```

ï¼ˆ`Scene s a` ã«ã¯ `Var s a` ã¨ã„ã†èª­ã¿æ›¸ãå¯èƒ½ãªå¤‰æ•°ã®æ©Ÿèƒ½ãŒã‚ã‚Š `s` ãŒå­˜åœ¨å‹ã¨ãªã£ã¦ã„ã‚‹ã“ã¨ã§ `ST s a` åŒæ§˜ã€å¤‰æ•°ã®å€¤ã‚’å¤–ã‹ã‚‰å–ã‚Šå‡ºã›ãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ï¼‰

æ—©é€Ÿã“ã‚Œã‚‰ã‚’ä½¿ã£ã¦`drawBox`ã¨`drawCircle`ã‚’é †ç•ªã«å®Ÿè¡Œã™ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```hs
scene do
  play drawBox
  play drawCircle
```

(`do`ã®å‰ã®`$`ã‚’çœç•¥ã™ã‚‹ã«ã¯`BlockArguments`æ‹¡å¼µã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™)

![](https://storage.googleapis.com/zenn-user-upload/2jmjjxitzzvqwkclywa2sa8mh52m)

bindã«ã‚ˆã‚Šã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã«å†ç”Ÿã•ã‚Œã¾ã™ãŒ `fork :: Scene s a -> Scene s a` ã‚’ä½¿ã†ã“ã¨ã§ä¸¦åˆ—ã«å†ç”Ÿã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/933yox365zhxieap8rntqwp94ixp)

ã“ã‚Œã¯`parA`ã‚’ä½¿ã£ãŸæ™‚ã¨åŒã˜æŒ™å‹•ã«ãªã‚Šã¾ã™ã€‚

### Sprite s a

ã“ã“ã¾ã§ã¯`Animation`å‹ã§ã‚‚ã§ãã‚‹ã“ã¨ã§ã—ãŸãŒã€`Scene s a`ã®æ©Ÿèƒ½ã¨ã—ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å¯¾è±¡ã‚’`Sprite s`ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ç›´æ¥æ“ä½œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```hs
newSpriteA :: Animation -> Scene s (Sprite s)
```

ã“ã‚Œã‚‰ã®é–¢æ•°ã¯ `Sprite s` ã‚’ä½œæˆã™ã‚‹ã¨åŒæ™‚ã«ã‚·ãƒ¼ãƒ³ã®ä¸­ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ç”Ÿã™ã‚‹ã“ã¨ã‚‚è¡Œã„ã¾ã™ã€‚

`Sprite s` ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ“ä½œãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

```hs
-- | Sprite ã‚’ç ´å£Šã—ã¦ç”»é¢ã‹ã‚‰æ¶ˆã™
destroySprite :: Sprite s -> Scene s ()

-- | Sprite ã«å¯¾ã—ã¦æ™‚é–“ã«å¿œã˜ãŸSVGã®å¤‰æ›ã‚’é©ç”¨ã™ã‚‹
spriteTween :: Sprite s -> Duration -> (Double -> SVG -> SVG) -> Scene s ()

-- | Sprite ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’é©ç”¨ã™ã‚‹
spriteE :: Sprite s -> Effect -> Scene s ()
```

ã¾ãšã¯ `destroySprite` ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```hs
scene do
  s <- fork $ newSpriteA drawBox
  fork $ wait 1 >> destroySprite s
  play drawCircle
```

![](https://storage.googleapis.com/zenn-user-upload/ai0wwxrxxblq6wv8bkz0fyagbtek)

ã¾ãš `fork` ã‚’ä½¿ã£ã¦å››è§’å½¢ã‚’æãå§‹ã‚ãŸå¾Œã«ã€å†ã³ `fork` ã§1ç§’å¾Œã«å››è§’å½¢ã‚’æã„ã¦ã„ã‚‹Spriteã‚’æ¶ˆã™å‡¦ç†ã‚’èµ°ã‚‰ã›ã¾ã™ã€‚æœ€å¾Œã«å††ã‚’æãå§‹ã‚ã‚‹ã“ã¨ã§ã€2ç§’ã‹ã‘ã¦å††ã‚’æã„ã¦ã„ã‚‹é€”ä¸­ã®1ç§’ç›®ã§å››è§’å½¢ãŒæ¶ˆãˆã‚‹ã¨ã„ã†ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸï¼ˆã“ã“ã§`wait`ã¯`Scene s a`ã®ä¸­ã§æŒ‡å®šã•ã‚ŒãŸç§’æ•°ã ã‘å¾…ã¤é–¢æ•°ã§ã™ï¼‰ã€‚

æ¬¡ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```hs
scene do
  s <- fork $ newSpriteA drawCircle
  spriteE s $ overBeginning 1 fadeInE
  spriteE s $ overEnding 0.5 fadeOutE
```

![](https://storage.googleapis.com/zenn-user-upload/m3ol4hgds0qft0okqtngn98yivjh)

å††ã‚’æã `drawCircle` ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒã€é–‹å§‹ä¸€ç§’ã§ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ `overBeginning 1 fadeInE` ã—ã€çµ‚äº†ã™ã‚‹0.5ç§’ã§ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ `overEnding 0.5 fadeOutE` ã—ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚`Effect`ã¯ã“ã‚Œã ã‘ã§ãªãè±Šå¯Œãªç¨®é¡ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã“ã§ã¯`Object s a`ã‚’ä½¿ã£ãŸãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã®èª¬æ˜ã«ç§»ã‚ŠãŸã„ã®ã§æ°—ã«ãªã‚‹äººã¯ä»¥ä¸‹ã®Haddockã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

https://hackage.haskell.org/package/reanimate-1.1.2.1/docs/Reanimate-Effect.html

### Object s a
`Sprite s` ã¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¼´ã†å¯¾è±¡ã‚’ `Scene s a` ã®ä¸­ã§æ‰±ã†ãŸã‚ã®å‹ã§ã—ãŸãŒã€`Object s a`ã¯SVGã®ã‚ˆã†ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ `Scene s a` ã®ä¸­ã§æ‰±ã†ãŸã‚ã®å‹ã§ã™ã€‚

```hs
oNew :: Renderable a => a -> Scene s (Object s a)
oShow :: Object s a -> Scene s ()
```

`SVG` ã¯ `Renderable` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãªã£ã¦ã„ã‚‹ã®ã§ `oNew` ã‚’ä½¿ã£ã¦ `Object s a` ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚`oNew` ã—ãŸã ã‘ã§ã¯ `Object s a` ã¯è¡¨ç¤ºã•ã‚Œãšæ˜ç¤ºçš„ã« `oShow` ã‚’å‘¼ã¶å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

`Object s a` ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢æ•°ã‚’ä½¿ã£ã¦æ“ä½œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```hs
-- | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æŒã¤ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹
oModifyS :: Object s a -> State (ObjectData a) b -> Scene s ()

-- | æ™‚é–“ã‚’ã‹ã‘ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æŒã¤ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹
oTweenS :: Object s a -> Duration -> (Double -> State (ObjectData a) b) -> Scene s ()
```

`oTweenS` ã‚’ä½¿ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«çµ‚äº†æ™‚ã®åº§æ¨™ã‚’æŒ‡å®šã™ã‚‹ã ã‘ã§ `Object s a` ã‚’å‹•ã‹ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```hs
scene do
  obj <- oNew $ mkCircle 2
  oShow obj
  oTweenS obj 2 (\t -> oRightX %= \origin -> fromToS origin screenRight t)
```

`oRightX` ã¯ãƒ¬ãƒ³ã‚ºã«ãªã£ã¦ã„ã¦ `%=` ã‚’ä½¿ã†ã“ã¨ã§ `State` ã®ä¸­ã§ãã®å€¤ã ã‘æ›¸ãæ›ãˆã‚‹ã¨ã„ã†æ“ä½œã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

```hs
oRightX :: Lens' (ObjectData a) Double
(%=) :: MonadState s m => ASetter s s a b -> (a -> b) -> m ()
```

ã¤ã¾ã‚Šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å³ç«¯ã®xåº§æ¨™`oRightX`ã‚’å…ƒã®ä½ç½®`origin`ã‹ã‚‰ç”»é¢ã®å³ç«¯`screenRight`ã¾ã§åˆ»ã¿ãªãŒã‚‰`fromToS`å¤‰åŒ–ã•ã›ã‚‹ã¨ã„ã†äº‹ã‚’è¡Œã£ã¦ã„ã‚‹ã®ã§ã™ã€‚

ã¨ã“ã‚ã§ä»Šå›ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å³ç«¯ã®xåº§æ¨™ã‚’å¤‰åŒ–ã•ã›ã¾ã—ãŸãŒ`Object s a`ã®åº§æ¨™ã¯ã©ã®ã‚ˆã†ã«è¡¨ç¾ã•ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã‚‚ã—å·¦ç«¯ã‚’å¤‰åŒ–ã•ã›ãŸã„ã¨æ€ã£ãŸå ´åˆã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¹…ã‚’è€ƒæ…®ã—ã¦å³ç«¯ã®åº§æ¨™ãŒå¤‰åŒ–ã™ã‚‹é‡ã‚’è¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ**ã“ã†ã„ã†å†…éƒ¨è¡¨ç¾ã¯æç”»ã‚¨ãƒ³ã‚¸ãƒ³æ¯ã«ç•°ãªã£ã¦ãã‚‹ã®ã§æ™®é€šã¯æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€å®Ÿã¯å…¨ãæ°—ã«ã™ã‚‹å¿…è¦ã¯ãªã„**ã®ã§ã™ã€‚å·¦ç«¯ã‚’å¤‰åŒ–ã•ã›ãŸã‘ã‚Œã°`oLeftX`ã¨ã„ã†ãƒ¬ãƒ³ã‚ºãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ãã‚Œã‚’ä½¿ãˆã°æ€ã£ãŸã¨ãŠã‚Šã«å‹•ãã§ã—ã‚‡ã†ã€‚ã¤ã¾ã‚Š**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½ç½®ã®å†…éƒ¨è¡¨ç¾ãŒã©ã†ãªã£ã¦ã„ãŸã¨ã—ã¦ã‚‚æ“ä½œã—ãŸã„æ€§è³ªã‚’è¡¨ã™ãƒ¬ãƒ³ã‚ºã•ãˆç”¨æ„ã•ã‚Œã¦ã„ã‚Œã°ã€ã‚ãŸã‹ã‚‚ãã®æ€§è³ªã‚’ç›´æ¥æ“ä½œã—ã¦ã„ã‚‹ã‚ˆã†ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãã“ã¨ãŒã§ãã‚‹**ã®ã§ã™ã€‚ã“ã‚Œã¯ãƒ¬ãƒ³ã‚ºã®éå¸¸ã«å¼·åŠ›ã§ä¾¿åˆ©ãªæ€§è³ªã ã¨æ€ã„ã¾ã™ã€‚

ä¾‹ã¨ã—ã¦å¤§ãã•ã®é•ã†ï¼“ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å·¦æƒãˆã«ã™ã‚‹ã“ã¨ã‚’è€ƒãˆã¾ã™ã€‚é€šå¸¸ã§ã‚ã‚Œã°åŸç‚¹ã®ä½ç½®ã‹ã‚‰ãã‚Œãã‚Œã®å¹…ã‚’è€ƒæ…®ã—ã¦å·¦ã«ç§»å‹•ã™ã‚‹è·é›¢ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ãŒè¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€‚ãƒ¬ãƒ³ã‚ºã‚’ä½¿ãˆã°"å·¦ç«¯ã‚’æƒãˆã‚‹ã ã‘"ã§å®Ÿè£…ã§ãã¦ã—ã¾ã†ã®ã§ã™ã€‚

```hs
scene do
  obj1 <- oNew $ translate 0 0    $ mkCircle 2.34
  obj2 <- oNew $ translate 0 1    $ mkRect 1.34 1.61
  obj3 <- oNew $ translate 0 (-1) $ mkCircle 0.45

  oShow obj1
  oShow obj2
  oShow obj3

  fork $ oTweenS obj1 2 (\t -> oLeftX %= \origin -> fromToS origin (-2) t)
  fork $ oTweenS obj2 2 (\t -> oLeftX %= \origin -> fromToS origin (-2) t)
  oTweenS obj3 2 (\t -> oLeftX %= \origin -> fromToS origin (-2) t)
  wait 1
```

![](https://storage.googleapis.com/zenn-user-upload/5aquy6l0ez65levemujoce2d6a0e)

å¤§ãã•ã®é•ã†3ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æƒ³å®šé€šã‚Šå·¦æƒãˆã«ã§ãã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚å¤§ããã¦æƒãˆã‚‹å·¦ç«¯ãŒå¤–å´ã«ãªã£ã¦ã„ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯æ­£ã—ãå³ã«ç§»å‹•ã—ã¦ã„ã¾ã™ã­ã€‚

`oRightX, oLeftX` ä»¥å¤–ã«ã‚‚`Object s a`ã«å¯¾ã—ã¦å¤šãã®ãƒ¬ãƒ³ã‚ºãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

```hs
-- | xè»¸æ–¹å‘ã®ç§»å‹•
oTranslateX :: Lens' (ObjectData a) Double

-- | yè»¸æ–¹å‘ã®ç§»å‹•
oTranslateY :: Lens' (ObjectData a) Double

-- | ä¸Šç«¯ã®yåº§æ¨™
oTopY :: Lens' (ObjectData a) DoubleSource

-- | ä¸‹ç«¯ã®yåº§æ¨™
oBottomY :: Lens' (ObjectData a) DoubleSource

-- | å·¦ç«¯ã®xåº§æ¨™
oLeftX :: Lens' (ObjectData a) DoubleSource

-- | å³ç«¯ã®xåº§æ¨™
oRightX :: Lens' (ObjectData a) DoubleSource

-- | ä¸­å¿ƒã®xåº§æ¨™
oCenterX :: Lens' (ObjectData a) DoubleSource

-- | ä¸­å¿ƒã®yåº§æ¨™
oCenterY :: Lens' (ObjectData a) DoubleSource

-- | ä¸Šæ–¹å‘ã®ãƒãƒ¼ã‚¸ãƒ³
oMarginTop :: Lens' (ObjectData a) DoubleSource

-- | å³æ–¹å‘ã®ãƒãƒ¼ã‚¸ãƒ³
oMarginRight :: Lens' (ObjectData a) DoubleSource

-- | ä¸‹æ–¹å‘ã®ãƒãƒ¼ã‚¸ãƒ³
oMarginBottom :: Lens' (ObjectData a) DoubleSource

-- | å·¦æ–¹å‘ã®ãƒãƒ¼ã‚¸ãƒ³
oMarginLeft :: Lens' (ObjectData a) Double

-- | é€æ˜åº¦
oOpacity :: Lens' (ObjectData a) Double

-- | æ‹¡å¤§ç¸®å°å€ç‡
oScale :: Lens' (ObjectData a) DoubleSource
```

reanimateé–¢æ•°ã®ä½¿ã„æ–¹
-------------------

`Animation`å‹ã‚’ä½œã£ãŸå¾Œã¯ `reanimate` é–¢æ•°ã«é©ç”¨ã—`main`ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```hs
main :: IO ()
main = reanimate animation
```

ã“ã®ã‚ˆã†ã«ã™ã‚Œã°ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¼•æ•°ã‚’ä¸ãˆã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã§å‹•ä½œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãŸã‚Šã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```hs
$ stack run -- --help
Usage: reanimate [COMMAND | [-v|--verbose] [--ghc PATH]
                            [-G|--ghc-opt ARG] [--self PATH]]
  This program contains an animation which can either be viewed in a web-browser
  or rendered to disk.

Available options:
  --ghc PATH               Path to GHC binary
  -G,--ghc-opt ARG         Additional option to pass to ghc
  --self PATH              Source file used for live-reloading
  -h,--help                Show this help text

Available commands:
  check                    Run a system's diagnostic and report any missing
                           external dependencies.
  view                     Play animation in browser window.
  render                   Render animation to file.
  raw                      Output raw SVGs for animation at 60 fps. Used
                           internally by viewer.
```

mp4ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

```hs
$ stack run render
Animation options:
  fps:    60
  width:  2560
  height: 1440
  fmt:    mp4
  target: output.mp4
  raster: RasterRSvg
Starting render of animation: 2.0
Frames generated: 120/120, time spent: 0s
Frames rastered: 120/120, time spent: 9s
Frames rendered: 120/120, time spent: 4s
```

mp4ã‚’ä½œæˆã™ã‚‹ã«ã¯ ffmpeg ãŒå¿…è¦ã§ã™ã€‚

ãã®ä»–ã®æ©Ÿèƒ½ã«ã‚‚å¿…è¦ãªãƒ„ãƒ¼ãƒ«ãŒå…¥ã£ã¦ã‚‹ã‹ã©ã†ã‹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```hs
$ stack run check
reanimate checks:
  Has ffmpeg:                        4.3.1
  Has ffmpeg(rsvg):                  no
  Has dvisvgm:                       /Library/TeX/texbin/dvisvgm
  Has povray:                        /usr/local/bin/povray
  Has blender:                       no
  Has rsvg-convert:                  2.50.2
  Has inkscape:                      no
  Has imagemagick:                   no
  Has LaTeX:                         /Library/TeX/texbin/latex
  Has LaTeX package 'babel':         OK
  Has LaTeX package 'preview':       OK
  Has LaTeX package 'amsmath':       OK
  Has XeLaTeX:                       /Library/TeX/texbin/xelatex
  Has XeLaTeX package 'ctex':        OK
```

å…¥ã£ã¦ã„ãªã„ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚‹ã‹ã‚‰ã¨ã„ã£ã¦å¿…ãšã—ã‚‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ããªã„ã‚ã‘ã§ã¯æœ‰ã‚Šã¾ã›ã‚“ã€‚å¿…è¦ãªã‚‚ã®ãŒã‚ã‚Œã°å¤§ä¸ˆå¤«ã§ã™ã€‚

mp4ã§ã¯ãªãGIFã‚„WebMã‚’æ›¸ãå‡ºã™æ™‚ã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®šã—ã¾ã™ã€‚

```hs
$ stack run render -- --format gif
Animation options:
  fps:    25
  width:  320
  height: 180
  fmt:    gif
  target: output.gif
  raster: RasterRSvg
Starting render of animation: 2.0
Frames generated: 50/50, time spent: 0s
Frames rastered: 50/50, time spent: 2s
Frames rendered: 50/50, time spent: 1s
```

ã“ã‚Œã§GIFãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

reanimateã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ãªãã¦ã‚‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªã§ãã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯`.hs`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å®Ÿè¡Œã—ãªã„ã¨ä½¿ãˆãªã„ã®ã§ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

```hs
$ stack runghc app/Main.hs
```

ãŠã‚ã‚Šã«
-------
reanimateã¯æ©Ÿèƒ½ãŒè±Šå¯Œãªã®ã§ã“ã“ã§ç´¹ä»‹ã—ãã‚Œãªã‹ã£ãŸã‚‚ã®ã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°LaTexã¨é€£æºã™ã‚Œã°æ•°å¼ã‚„è‹±æ–‡ã«å¯¾ã—ã¦ç´°ã‚„ã‹ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚å…¬å¼ã‚µã‚¤ãƒˆã«ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒã‚ã‚‹ã®ã§è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚

https://reanimate.readthedocs.io/en/latest/tut_equation/

ä»–ã«ã‚‚Chipmonk 2Dã‚„Blenderã¨ã®é€£æºãªã©ã¾ã ã¾ã æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã™ãŒã€å…¥é–€è¨˜äº‹ã¨ã„ã†ã“ã¨ã§ã“ã“ã§ç­†ã‚’ç½®ããŸã„ã¨æ€ã„ã¾ã™ã€‚æœ€å¾Œã«ã“ã®è¨˜äº‹ã®å†’é ­ã«è²¼ã£ãŸã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚è€ƒã¾ã§ã«è²¼ã‚Šä»˜ã‘ã¦ãŠãã¾ã™ã€‚

```hs
scene do
 s <- fork $ newSpriteA $ staticFrame 2 titleSvg
 spriteE s $ overBeginning 0.5 fadeInE
 spriteE s $ overEnding 0.4 fadeOutE
 spriteTween s 0.4 (flip const)
 spriteTween s 0.1 (\t -> scale (1+(0.1*t)))
 spriteTween s 1.1 (flip const)
 spriteTween s 0.4 (\t -> scale (1+(5*t)))
 where
   titleSvg = mkGroup
       [ scale 0.5 $ translate 0 3    $ mkText "è¤‡é›‘ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’"
       , scale 0.5 $ translate 0 0    $ mkText "ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã™ã‚‹"
       , scale 0.5 $ translate 0 (-3) $ mkText "ã€œReanimateå…¥é–€ã€œ"
       ]
```

----

ï¼¼èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ï¼
ã“ã®è¨˜äº‹ãŒé¢ç™½ã‹ã£ãŸã‚‰ ã„ã„ã­â™¡ ã‚’ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™â˜ºï¸
100å††ã‹ã‚‰ã§ã‚‚ ã‚µãƒãƒ¼ãƒˆÂ¥ ã‚’ã„ãŸã ã‘ã‚Œã°æ¬¡ã®è¨˜äº‹ã‚’æ›¸ããŸã‚åŠ±ã¿ã«ãªã‚Šã¾ã™ğŸ™Œ
